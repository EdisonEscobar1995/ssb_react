"use strict";(self.webpackChunkssb=self.webpackChunkssb||[]).push([[393],{281:function(e,n,t){t.d(n,{i:function(){return f}});var r=t(1413),o=t(3433),a=t(4519),i=t(6162),c=t(6894),s=t(2513),u=t(5492),l=t(2704),d=t(9151),p=t(2556),f=function(e){var n=e.title,t=e.columns,f=e.dataSource,m=e.addButtons,h=e.addActions,C=e.loading,x=e.filterComponent,v=(0,o.Z)(t);return h&&h.length>0&&v.push({title:"Acciones",key:"",align:"right",width:50*(h&&h.length||0),render:function(e,n){return h&&h.map((function(e,t){return(0,p.jsxs)(i.Z,{title:e.text,children:[" ",e.confirm?(0,p.jsx)(c.Z,{title:e.confirm,okText:e.okText||"Ok",cancelText:e.cancelText||"Cancel",placement:"bottomRight",onConfirm:function(){return e.onClick(n)},children:(0,p.jsx)(s.Z,{type:e.type||"ghost",shape:"circle",icon:e.icon})}):(0,p.jsx)(s.Z,{type:e.type||"ghost",shape:"circle",icon:e.icon,onClick:function(){return e.onClick(n)}})]},"action-button-".concat(t,"-").concat((null===n||void 0===n?void 0:n.id)||t))}))}}),(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)(u.Z,{className:"row-title",children:[(0,p.jsx)(l.Z,{children:n||""}),(0,p.jsx)(l.Z,{children:m&&m.map((function(e,n){return(0,p.jsxs)(a.Fragment,{children:[(0,p.jsx)(s.Z,(0,r.Z)((0,r.Z)({size:"large",type:"primary"},e),{},{children:e.text}))," "]},"button-section-".concat(n))}))})]}),x&&(0,p.jsx)(p.Fragment,{children:x}),(0,p.jsx)(d.Z,{scroll:{x:!0},columns:v,dataSource:f,className:"custom-table",loading:C})]})}},1393:function(e,n,t){t.r(n),t.d(n,{default:function(){return S}});var r=t(3433),o=t(4165),a=t(5861),i=t(9439),c=t(4519),s=t(281),u=t(3008),l=t(5492),d=t(2704),p=t(332),f=t(1749),m=t(8501),h=t(2556),C=u.Z.Option,x=function(e){var n=e.dataSource,t=e.loading,r=e.handleDelete,o=e.dataCountries,a=e.handleChangeFilter,i=e.filterValue,c=(0,p.s0)(),x=[{title:"Id empresa",dataIndex:"id",key:"id",filters:[{}],render:function(e){return(0,h.jsx)("a",{children:e})},sorter:function(e,n){var t=e.id.toLocaleLowerCase().localeCompare(n.id.toLocaleLowerCase());return 0===t&&e!==n?n.id.localeCompare(e.id):t}},{title:"Descripci\xf3n",dataIndex:"description",key:"description",sorter:function(e,n){var t=e.description.toLocaleLowerCase().localeCompare(n.description.toLocaleLowerCase());return 0===t&&e!==n?n.description.localeCompare(e.description):t}},{title:"Id Pa\xeds",dataIndex:"idCountry",key:"idCountry",sorter:function(e,n){var t=e.idCountry.toLocaleLowerCase().localeCompare(n.idCountry.toLocaleLowerCase());return 0===t&&e!==n?n.idCountry.localeCompare(e.idCountry):t}},{title:"Par\xe1metro Empresa",key:"param",dataIndex:"param",sorter:function(e,n){var t=e.param.toLocaleLowerCase().localeCompare(n.param.toLocaleLowerCase());return 0===t&&e!==n?n.param.localeCompare(e.param):t}}],v=function(){return(0,h.jsxs)(l.Z,{className:"filter-companies",children:[(0,h.jsx)(d.Z,{span:2,children:(0,h.jsx)("b",{children:"Id Pa\xeds: "})}),(0,h.jsx)(d.Z,{span:10,children:(0,h.jsx)(u.Z,{allowClear:!0,showSearch:!0,defaultValue:i,onChange:function(e){return a(e)},style:{width:"100%"},children:o.map((function(e,n){return(0,h.jsx)(C,{value:e,children:e},"opt-".concat(n,"-").concat(e))}))})})]})};return(0,h.jsx)(s.i,{title:"Compa\xf1ias",columns:x,dataSource:n,filterComponent:(0,h.jsx)(v,{}),addButtons:[{}],addActions:[{text:"Edit",icon:(0,h.jsx)(f.Z,{}),type:"primary",onClick:function(e){c("form/".concat(e._id))}},{text:"Delete",icon:(0,h.jsx)(m.Z,{}),type:"danger",okText:"Ok",confirm:"Are you sure you want to delete this QPR?",onClick:function(e){return n=e._id,console.log("id == ",n),void r(n);var n}}],loading:t})},v=t(3687),Z=t(3144),y=t(5671),g=t(6787),j=t.n(g),k=function(){function e(){(0,y.Z)(this,e)}return(0,Z.Z)(e,null,[{key:"mapperCompany",value:function(e){var n,t=null;e&&(t={id:e.refId,param:e.param,idCountry:(null===e||void 0===e||null===(n=e.country)||void 0===n?void 0:n.refId)||"",description:(null===e||void 0===e?void 0:e.empresaDescription)||"",empresaCode:e.empresaCode||"",order:(null===e||void 0===e?void 0:e.order)||""});return t}},{key:"mapperCompanies",value:function(e){var n=this;return e.map((function(e){return n.mapperCompany(null===e||void 0===e?void 0:e.empresa)}))}}]),e}(),w=(0,Z.Z)((function e(){(0,y.Z)(this,e)}));w.getCompanies=function(){var e=(0,a.Z)((0,o.Z)().mark((function e(n){var t,r,a,i;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="".concat("https://dev.santillanar4.com","/sif/v3/empresas"),e.next=3,j().get(t,{headers:{Authorization:"Bearer ".concat(n),Accept:"application/json;odata=verbose"}});case 3:return r=e.sent,a=r.data,console.log(a),i=k.mapperCompanies(a.empresaList),e.abrupt("return",i);case 8:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();var L=t(5447),b=function(){var e=(0,c.useContext)(v.Z).setDefaultMenu,n=(0,L.aC)().authService.getAuthTokens(),t=(0,c.useState)(!1),s=(0,i.Z)(t,2),u=s[0],l=s[1],d=(0,c.useState)([]),p=(0,i.Z)(d,2),f=p[0],m=p[1],C=(0,c.useState)([]),Z=(0,i.Z)(C,2),y=Z[0],g=Z[1],j=(0,c.useState)([]),k=(0,i.Z)(j,2),b=k[0],S=k[1],I=(0,c.useState)(""),A=(0,i.Z)(I,2),D=A[0],T=A[1],E=function(e){var n=[];e.forEach((function(e){n.findIndex((function(n){return n===e.idCountry}))<0&&n.push(e.idCountry)})),console.log("countries == ",n),S(n)},F=function(){var e=(0,a.Z)((0,o.Z)().mark((function e(){var t;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,l(!0),e.next=4,w.getCompanies(null===n||void 0===n?void 0:n.access_token);case 4:t=e.sent,g(t),m(t),E(t),l(!1),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(0),l(!1),console.error("Error en getCompanies = ",e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}();return(0,c.useEffect)((function(){e&&e("companies"),F()}),[]),(0,h.jsx)(x,{dataSource:y,loading:u,handleDelete:function(){},dataCountries:b,handleChangeFilter:function(e){console.log(e),T(e);var n=(0,r.Z)(f);e&&(n=f.filter((function(n){return n.idCountry===e}))),g(n)},filterValue:D})},S=function(){return(0,h.jsx)(b,{})}}}]);
//# sourceMappingURL=393.39a54fd3.chunk.js.map